ACTOR DuneWarrior 30040
{
//$Category Stronghold_Monsters
  spawnid 215
  painchance "Stunner", 128

  OBITUARY "%o was killed by a dune warrior."
  Health 120
  Radius 20
  Height 56
  Mass 100
  Speed 12
  PainChance 160
  SEESOUND "dune/sight"
  ATTACKSOUND "chainguy/attack"
  PAINSOUND "dune/pain"
  DEATHSOUND "dune/death"
  DropItem "Clip" 128
  DropItem "Shell" 128
  DropItem "RocketAmmo" 128
  MONSTER
  +FloorClip
  Decal Bulletchip
  states
  {
  Spawn:
    ZHRT AB 10 A_Look
    Loop
  See:
    ZHRT AABBCCDD 4 A_Chase
    Loop
  Missile:
    ZHRT E 0 A_Jump(80, 6)
    ZHRT E 0 A_Jump(80, 20)
    ZHRT E 0 A_Jump(80, 24)
    ZHRT E 10 A_FaceTarget
    ZHRT F 10 A_CustomMissile("DuneWarriorGrenade", 32, 0, random(16,-16), 0)
    ZHRT E 10
    Goto See
    ZHRT E 10 A_FaceTarget
    ZHRT FE 4 BRIGHT A_CPosAttack
    ZHRT F 1
    ZHRT FE 4 BRIGHT A_CPosAttack
    ZHRT F 1
    ZHRT FE 4 BRIGHT A_CPosAttack
    ZHRT F 1
    ZHRT FE 4 BRIGHT A_CPosAttack
    ZHRT F 1
    ZHRT FE 4 BRIGHT A_CPosAttack
    ZHRT F 1 
    Goto See
    ZHRT E 6 A_FaceTarget
    ZHRT F 12 A_CustomMissile("DuneWarriorMissile", 32, 0, random(16,-16), 0)
    ZHRT E 12 A_FaceTarget
    ZHRT F 12 A_CustomMissile("DuneWarriorMissile", 32, 0, random(16,-16), 0)
    Goto See
    ZHRT A 0 A_SetInvulnerable 
    ZHRT A 0 A_UnSetShootable 
    ZHRT A 0 A_PlaySound("dune/active")
    ZHRT A 1 A_SetTranslucent(0.8, 0)
    ZHRT A 1 A_SetTranslucent(0.6, 0)
    ZHRT A 1 A_SetTranslucent(0.4, 0)
    ZHRT A 1 A_SetTranslucent(0.3, 0)
    ZHRT A 1 A_SetTranslucent(0.0, 0)
    ZHRT AABBCCDDAABBCCDDAABBCCDDAABBCCDD 4 A_ExtChase(0,0)
    ZHRT A 0 A_PlaySound("dune/active")
    ZHRT C 1 A_SetTranslucent(0.2, 0)
    ZHRT C 1 A_SetTranslucent(0.4, 0)
    ZHRT D 1 A_SetTranslucent(0.6, 0)
    ZHRT D 1 A_SetTranslucent(0.8, 0)
    ZHRT D 1 A_SetTranslucent(1.0, 0)   
    ZHRT A 0 A_UnsetInvulnerable
    ZHRT A 0 A_SetShootable
    Goto Missile+22
  Pain:
    ZHRT G 3
    ZHRT G 3 A_Pain
    ZHRT G 0 A_Jump(128,1)
    Goto Missile
    ZHRT G 0       
    Goto Missile+27
  Pain.Stunner:
       ZHRT G 2 A_ChangeFlag("NoPain", 1)
       ZHRT G 300 A_Pain
       ZHRT G 0 A_ChangeFlag("NoPain", 0)
       goto See  
  Death:
    TNT1 A 0 A_GiveToTarget("AwardItem", 3)
    ZHRT H 5
    ZHRT I 5 A_Scream
    ZHRT J 5 A_NoBlocking
    ZHRT K 5
    ZHRT L 3000
    ZHRT LLLLLLLLLLLL 2 A_FadeOut(0.1)
    Stop
  XDeath:
    TNT1 A 0 A_GiveToTarget("AwardItem", 6)
    ZHRT O 5
    ZHRT P 5 A_XScream
    ZHRT Q 5 A_NoBlocking
    ZHRT RTUV 5
    ZHRT W 3000
    ZHRT WWWWWWWWWWWW 2 A_FadeOut(0.1)
    Stop
  Raise:
    ZHRT KJIH 5
    Goto See
  }
}

ACTOR DuneWarriorMissile
{
   Radius 8
   Height 12
   Speed 20
   Damage 10
   Scale 0.6
   SpawnID 251
   PROJECTILE
   RENDERSTYLE Normal
   SeeSound "monster/brufir"
   DeathSound "weapons/hellex"
   DONTHURTSHOOTER
   +FIREDAMAGE
   States
   {
   Spawn: 
      FBRS A 1 Bright
      FBRS A 1 Bright A_SpawnItemEx("BruiserTrail",0,0,0,0,0,0,0,128)
      loop
   Death:
      BAL3 C 0 Bright A_SetTranslucent (0.67,1)
      BAL3 C 6 Bright
      BAL3 D 6 Bright A_Explode(64,64,0)
      BAL3 E 6 Bright
      stop
   }
}

ACTOR DuneWarriorGrenade
{
  Radius 6
  Height 8
  Speed 20
  SEESOUND "dune/bounce"
  DEATHSOUND "catharsi/shotdth"
  PROJECTILE
  -Shootable
  +DoomBounce
  +Randomize
  -NoGravity
  states
  {
  Spawn:
    THR2 A 4 A_PlaySound("catharsi/thermtick")
    THR2 B 16 
    THR2 A 4 A_PlaySound("catharsi/thermtick")
    THR2 B 16
    THR2 A 4 A_PlaySound("catharsi/thermtick")
    THR2 B 16
    THR2 A 4 A_PlaySound("catharsi/thermtick")  
    THR2 B 16
    THR2 A 4 A_PlaySound("catharsi/thermtick")  
    THR2 B 16  
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 0)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 20)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 40)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 60)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 80)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 100)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 120)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 140)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 160)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 180)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 200)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 220)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 240)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 260)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 280)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 300)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 320)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 340)
    SDFB BCDE 6 BRIGHT A_Die
    Loop
  Death:
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 0)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 20)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 40)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 60)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 80)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 100)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 120)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 140)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 160)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 180)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 200)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 220)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 240)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 260)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 280)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 300)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 320)
    SDFB B 0 A_CustomMissile("CatharsiBall", 4, 2, 340)
    SDFB BCDE 6 BRIGHT A_Die
    Stop
  }
}

